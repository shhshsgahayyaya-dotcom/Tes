-- ✅ Load Wizard UI Library
local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/bloodball/-back-ups-for-libs/main/wizard"))()

-- ✅ Create a UI Window (nama dihapus)
local Window = Library:NewWindow("")

-- ✅ Add a Toggle Section (nama dihapus)
local FarmTab = Window:NewSection("")

-- Flag for toggle state
local autoCollect = false

-- Toggle Button (nama dihapus)
FarmTab:CreateToggle("", function(state)
    autoCollect = state
    if autoCollect then
        print("✅ Auto Chest Collection: ON")
        startAutoCollect()
    else
        print("❌ Auto Chest Collection: OFF")
    end
end)

-- ✅ Function to Collect Chest via RemoteEvent
function startAutoCollect()
    coroutine.wrap(function()
        while autoCollect do
            local ReplicatedStorage = game:GetService("ReplicatedStorage")
            local RemoteEvent = ReplicatedStorage:WaitForChild("RemoteEvent"):WaitForChild("CommonServerFunction")

            -- Example: collecting a specific chest
            local chest = workspace:FindFirstChild("Map") and workspace.Map:FindFirstChild("TreasureChest")
            if chest and chest:FindFirstChild("Land") then
                for _, v in pairs(chest.Land:GetChildren()) do
                    if v:IsA("Model") and v.Name:find("TreasureChest") then
                        local args = {
                            [1] = "OnOpenTreasureChest",
                            [2] = v
                        }

                        -- Invoke the server function to open the chest
                        pcall(function()
                            RemoteEvent:InvokeServer(unpack(args))
                        end)
                    end
                end
            end
            wait(2) -- Wait before next attempt
        end
    end)()
end
